/* jquery.mask.js - @version: v1.6.5 - @author: Igor Escobar */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto)}(function(a){"use strict";var b=function(b,c,d){var f,g,e=this;b=a(b),c="function"==typeof c?c(b.val(),void 0,b,d):c,e.init=function(){d=d||{},e.byPassKeys=[9,16,17,18,36,37,38,39,40,91],e.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}},e.translation=a.extend({},e.translation,d.translation),e=a.extend(!0,{},e,d),g=h.getRegexMask(),b.each(function(){d.maxlength!==!1&&b.attr("maxlength",c.length),d.placeholder&&b.attr("placeholder",d.placeholder),b.attr("autocomplete","off"),h.destroyEvents(),h.events();var a=h.getCaret();h.val(h.getMasked()),h.setCaret(a+h.getMaskCharactersBeforeCount(a,!0))})};var h={getCaret:function(){var a,c=0,d=b.get(0),e=document.selection,f=d.selectionStart;return e&&!~navigator.appVersion.indexOf("MSIE 10")?(a=e.createRange(),a.moveStart("character",b.is("input")?-b.val().length:-b.text().length),c=a.text.length):(f||"0"===f)&&(c=f),c},setCaret:function(a){if(b.is(":focus")){var c,d=b.get(0);d.setSelectionRange?d.setSelectionRange(a,a):d.createTextRange&&(c=d.createTextRange(),c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select())}},events:function(){b.on("keydown.mask",function(){f=h.val()}),b.on("keyup.mask",h.behaviour),b.on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},100)}),b.on("change.mask",function(){b.data("changeCalled",!0)}),b.on("blur.mask",function(b){var c=a(b.target);c.prop("defaultValue")!==c.val()&&(c.prop("defaultValue",c.val()),c.data("changeCalled")||c.trigger("change")),c.data("changeCalled",!1)}),b.on("focusout.mask",function(){d.clearIfNotMatch&&!g.test(h.val())&&h.val("")})},getRegexMask:function(){for(var b,d,f,g,h,i,a=[],j=0;j<c.length;j++)b=e.translation[c[j]],b?(d=b.pattern.toString().replace(/.{1}$|^.{1}/g,""),f=b.optional,g=b.recursive,g?(a.push(c[j]),h={digit:c[j],pattern:d}):a.push(f||g?d+"?":d)):a.push("\\"+c[j]);return i=a.join(""),h&&(i=i.replace(new RegExp("("+h.digit+"(.*"+h.digit+")?)"),"($1)?").replace(new RegExp(h.digit,"g"),h.pattern)),new RegExp(i)},destroyEvents:function(){b.off("keydown.mask keyup.mask paste.mask drop.mask change.mask blur.mask focusout.mask").removeData("changeCalled")},val:function(a){var c=b.is("input");return arguments.length>0?c?b.val(a):b.text(a):c?b.val():b.text()},getMaskCharactersBeforeCount:function(a,b){for(var d=0,f=0,g=c.length;g>f&&a>f;f++)e.translation[c.charAt(f)]||(a=b?a+1:a,d++);return d},determineCaretPos:function(a,b,d,f){var g=e.translation[c.charAt(Math.min(a-1,c.length-1))];return g?Math.min(a+d-b-f,d):h.determineCaretPos(a+1,b,d,f)},behaviour:function(b){b=b||window.event;var c=b.keyCode||b.which;if(-1===a.inArray(c,e.byPassKeys)){var d=h.getCaret(),f=h.val(),g=f.length,i=g>d,j=h.getMasked(),k=j.length,l=h.getMaskCharactersBeforeCount(k-1)-h.getMaskCharactersBeforeCount(g-1);return j!==f&&h.val(j),!i||65===c&&b.ctrlKey||(8!==c&&46!==c&&(d=h.determineCaretPos(d,g,k,l)),h.setCaret(d)),h.callbacks(b)}},getMasked:function(a){var o,p,b=[],f=h.val(),g=0,i=c.length,j=0,k=f.length,l=1,m="push",n=-1;for(d.reverse?(m="unshift",l=-1,o=0,g=i-1,j=k-1,p=function(){return g>-1&&j>-1}):(o=i-1,p=function(){return i>g&&k>j});p();){var q=c.charAt(g),r=f.charAt(j),s=e.translation[q];s?(r.match(s.pattern)?(b[m](r),s.recursive&&(-1===n?n=g:g===o&&(g=n-l),o===n&&(g-=l)),g+=l):s.optional&&(g+=l,j-=l),j+=l):(a||b[m](q),r===q&&(j+=l),g+=l)}var t=c.charAt(o);return i!==k+1||e.translation[t]||b.push(t),b.join("")},callbacks:function(a){var e=h.val(),g=h.val()!==f;g===!0&&"function"==typeof d.onChange&&d.onChange(e,a,b,d),g===!0&&"function"==typeof d.onKeyPress&&d.onKeyPress(e,a,b,d),"function"==typeof d.onComplete&&e.length===c.length&&d.onComplete(e,a,b,d)}};e.remove=function(){var a=h.getCaret(),b=h.getMaskCharactersBeforeCount(a);h.destroyEvents(),h.val(e.getCleanVal()).removeAttr("maxlength"),h.setCaret(a-b)},e.getCleanVal=function(){return h.getMasked(!0)},e.init()};a.fn.mask=function(c,d){return this.unmask(),this.each(function(){a(this).data("mask",new b(this,c,d))})},a.fn.unmask=function(){return this.each(function(){try{a(this).data("mask").remove()}catch(b){}})},a.fn.cleanVal=function(){return a(this).data("mask").getCleanVal()},a("*[data-mask]").each(function(){var b=a(this),c={},d="data-mask-";"true"===b.attr(d+"reverse")&&(c.reverse=!0),"false"===b.attr(d+"maxlength")&&(c.maxlength=!1),"true"===b.attr(d+"clearifnotmatch")&&(c.clearIfNotMatch=!0),b.mask(b.attr("data-mask"),c)})});
