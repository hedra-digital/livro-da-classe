<div id="originals-container" class="originals-container">
  <div class="manual-container">
    <div class="question">
      <span>Você já leu nosso manual?</span>
    </div>
    <div class="btn-group">
      <%= link_to 'Não', manual_path, class: 'btn', target: '_blank' %>
      <%= link_to 'Sim', '#', class: 'btn btn-success', onclick: 'return chaptersContainer();'  %>
    </div>
  </div>
  <div class="chapters-container" hidden="true">
    <div class="row question">
      <% if !@book.id.present? %>
        <div class="row">
          <span>Vamos adicionar os capítulos do seu livro? Atenção, não se preocupe com o sumário. Faremos isso para você.</span>
        </div>
        <div class="row chapter-info">
          <div class="span7"><%= text_field_tag :title, nil, :placeholder => 'Título'%></div>
          <%= text_field_tag :subtitle, nil,:placeholder => 'Subtítulo' %>
          <%= text_field_tag :author, nil, :placeholder => 'Autor do Capítulo' %>
          <%= link_to '', '#', class: 'icon-plus', onclick: 'return addChapterLine();' %>
        </div>
        <div class="row chapter-table-container" hidden>
          <table id="chapter-table" class="table table-striped">
            <tbody>
            </tbody>
          </table>
        </div>
      <% else %>
      <div class="row exist-chapters">
        <span>Legal!!! Você já tem um livro criado. Pode acessar seus capítulos na página princiapl.</span>
      </div>
      <% end %>
      <div class="row btn-group">
        <%= link_to 'Voltar', '#', class: 'btn', onclick: 'return manualContainer();' %>
        <%= link_to 'Próximo', '#', class: 'btn', onclick: 'return extrasContainer();'  %>
      </div>
    </div>
  </div>
  <div class="extras-container" hidden="true">
    <div class="question">
      <span>Além dos capítlos, seu livro algum dos itens abaixo?</span>
    </div>

    <ul class="nav nav-tabs">
      <li role="presentation" class="active"><a href="#dedic" aria-controls="dedic" role="tab" data-toggle="tab">Dedicatória</a></li>
      <li role="presentation"><a href="#resume" aria-controls="resume" role="tab" data-toggle="tab">Resumo</a></li>
      <li role="presentation"><a href="#agree" aria-controls="agree" role="tab" data-toggle="tab">Agradecimentos</a></li>
      <li role="presentation"><a href="#sigla" aria-controls="sigla" role="tab" data-toggle="tab">Siglas</a></li>
      <li role="presentation"><a href="#image" aria-controls="image" role="tab" data-toggle="tab">Imagem de abertura</a></li>
    </ul>

    <!-- Tab panes -->
   <div class="tab-content">
     <div role="tabpanel" class="tab-pane active" id="dedic">Dedicatoria</div>
     <div role="tabpanel" class="tab-pane" id="resume">Resumo</div>
     <div role="tabpanel" class="tab-pane" id="agree">Agradecimentos.</div>
     <div role="tabpanel" class="tab-pane" id="sigla">Siglas</div>
     <div role="tabpanel" class="tab-pane" id="image">Imagem</div>
   </div>

    <div class="btn-group">
      <%= link_to 'Voltar', '#', class: 'btn', onclick: 'return chaptersContainer();' %>
    </div>
  </div>
</div>

<script>

$('#dedic a').click(function (e) {
  e.preventDefault()
  $(this).tab('dedic')
});

$('#resume a').click(function (e) {
  e.preventDefault()
  $(this).tab('resume')
});

$('#agree a').click(function (e) {
  e.preventDefault()
  $(this).tab('agree')
});

$('#sigla a').click(function (e) {
  e.preventDefault()
  $(this).tab('sigla')
});

$('#image a').click(function (e) {
  e.preventDefault()
  $(this).tab('image')
});

function chaptersContainer() {
  $('.manual-container').hide();
  $('.extras-container').hide();
  $('.chapters-container').show();
  return false;
}

function manualContainer() {
  $('.manual-container').show();
  $('.chapters-container').hide();
  $('.extras-container').hide();
  return false;
}

function extrasContainer() {
  $('.chapters-container').hide();
  $('.extras-container').show();
  $('.manual-container').hide();
  return false;
}

function addChapterLine() {
  if($('#title').val() == '') return false;
  tr = "<tr><td class='truncate'>"+ $('#title').val() +"</td><td class='truncate'>"+ $('#subtitle').val() +"</td><td class='truncate'>"+ $('#author').val() +"</td></tr>"
  $('#chapter-table').append(tr);
  if($('#chapter-table tr').length > 0) {
    $('.chapter-table-container').show();
  }
  $('#title').val('');
  $('#subtitle').val('');
  $('#author').val('');
  $('.substep').height($('.substep').height() + 36)
  return false
}

</script>
